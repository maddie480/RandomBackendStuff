# Celeste-related backend scheduled tasks

These classes have methods that are run periodically, and take part in the operations of [max480-random-stuff.appspot.com](https://github.com/max4805/RandomStuffWebsite) and the [Update Checker server](https://github.com/max4805/EverestUpdateCheckerServer). Everything I run that is related to Celeste is published here:

- `GameBananaAutomatedChecks`: ran once a day, at midnight French time. This runs some checks on all GameBanana submissions to help with moderation and detection of common issues:
  - code mods that use `yield return orig(self)` are reported, because using that in a hook causes 1 or 2-frame delays that are only noticed by people TASing the game.
  - code mods that use `GetFunctionPointer()` to get a pointer to a function and "skip" some parent classes (for example calling `ParentOfParentClass.Method()` instead of `ParentClass.Method()`) are reported, because those cause crashes on Mac only and with no error log, making troubleshooting quite tedious.
  - code mods that use `readonly struct`s, as this (inexplicably) causes issues on macOS.
  - mods that ship with files included with Celeste or Everest are reported, because this is unnecessary at best... or illegal at worst (in the case of Celeste.exe).
  - files that have the same everest.yaml name as another file while being attached to a different mod are reported, because that probably means there is a mod name conflict. **If one of them is marked "Obsolete" on GameBanana, it will not raise an alert**, since it means one mod makes the other obsolete.
  - the everest.yaml files of new mods that are in the updater database are also sent to the [everest.yaml validator](https://max480-random-stuff.appspot.com/celeste/everest-yaml-validator) and errors are reported.
- `CustomEntityCatalogGenerator`: run after `GameBananaAutomatedChecks`. It collects all information necessary to display the [Custom Entity Catalog](https://max480-random-stuff.appspot.com/celeste/custom-entity-catalog) from the update checker database, and writes it in JSON form for the website to pick up.
- `UpdateCheckerTracker`: this one tracks the logs produced by the [Update Checker server](https://github.com/max4805/EverestUpdateCheckerServer), and re-posts relevant lines to a Discord channel. It also calls some APIs on [max480-random-stuff.appspot.com](https://github.com/max4805/RandomStuffWebsite) in order to refresh caches (and [the Lua Cutscenes documentation mirror](https://storage.googleapis.com/lua-cutscenes-documentation/index.html), if necessary) when the update check is over.
- `CelesteStuffHealthCheck`: a bunch of methods that are run hourly or daily to check everything is fine on [max480-random-stuff.appspot.com](https://github.com/max4805/RandomStuffWebsite), [max480-random-stuff.herokuapp.com](https://github.com/max4805/RandomStuffWebsiteJS) and [Everest](https://everestapi.github.io). If one of those methods crashes, I'm notified through a Discord bot. Quite handy so that I don't have to monitor all of that myself. :sweat_smile: `check_gb.sh` goes with that as well.
- `TwitterUpdateChecker`: a bot that checks every 15 minutes for new tweets on several feeds, and posts to various places (through a bot and through a webhook) if it happens.
